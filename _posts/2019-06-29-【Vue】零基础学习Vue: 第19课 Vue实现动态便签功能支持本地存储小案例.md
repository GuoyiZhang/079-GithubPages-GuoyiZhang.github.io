---
layout:     post
title:      【Vue】零基础学习Vue: 第19课 Vue实现动态便签功能支持本地存储小案例
subtitle:   【Vue】零基础学习Vue: 第19课 Vue实现动态便签功能支持本地存储小案例
date:       2019-06-29 17:10:13
author:     Sunny day
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 前端
    - 零基础学习Vue
    - vue
---
>blog.getTitle() 

# 【Vue】零基础学习Vue: 第19课 Vue实现动态便签功能支持本地存储小案例


## 实现后的效果图：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190420105632874.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxNjE0OTI4,size_16,color_FFFFFF,t_70)

## []()[]()以下是全部实现代码注解很详细哦！如有疑惑可以评论留言：

<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>便签</title> <!-- 引入 bootstrap (bootstrap是写好css样式可以直接通过clssname应用) 也可以自己写 不引用 --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> <!-- 引入vue --> <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> <style> /*{margin:0;padding:0;} /#app{ width:1024px; margin: 10px auto; } .note{ display: inline; } .on{ color:/#ccc; text-decoration: line-through; //* text-decoration: line-through;字上画线属性 /*/ } </style> </head> <body> <div id="app"> <!-- 先说一下 所有标签的class样式基本都是bootstrap中写好的css样式 所以直接引用就行 不必关心它们 想了解进入http://www.bootcss.com即可--> <div class="panel panel-primary"> <div class="panel-heading"> <!-- num是一个计算属性 时时监测计入事件的变化 --> <h3>今天还有{{num}}件事未做</h3> <!-- v-model="title"绑定输入的值 @keyup键盘事件--> <input type="text" v-model="title" style="color:/#000" @keyup.13="add"> </div> <div class="panel-body"> <ul class="list-group"> <!-- v-for遍历filterTodos数组 todo:组员 index:组员下标 --> <li class="list-group-item" v-for="(todo,index) in filterTodos"> <!-- 当v-show为false时该标签不显示 双击任务后isDouble会变成true --> <div v-show="!todo.isDouble" class="note"> <input type="checkbox" v-model="todo.isSelected"> <!-- :class绑定css样式(on:true表示显示样式) @dblclick双击执行update函数index就是遍历的下标 --> <label :class="{on:todo.isSelected}" @dblclick="update(index)">{{todo.thing}}</label> </div> <!-- 为啥这里用v-show而不用v-if呢 因为v-if是直接吧标签从文档删所以更消化性能 而v-show则是使标签display: none;--> <!-- 上面的div不显示时就显示下面的input框 从而实现更改任务功能 --> <!-- v-focus自定义的指令 自动获取焦点 --> <input type="text" v-show="todo.isDouble" v-model="todo.thing" @blur="blur(index)" @keyup.13="blur(index)" v-focus> <!-- remove删除方法 --> <button @click="remove(index)" class="btn btn-xs pull-right btn-danger glyphicon glyphicon-trash"></button> </li> </ul> </div> <div class="panel-footer"> <ul class="nav nav-pills"> <!-- :绑定属性 active:true时使用active属性 active属性是bootstrap的css按钮背景样式 --> <li role="presentation" :class="{active:hash==='/#all'}"><a href="/#all">所有任务</a></li> <li role="presentation" :class="{active:hash==='/#finish'}"><a href="/#finish">已完成</a></li> <li role="presentation" :class="{active:hash==='/#unfinish'}"><a href="/#unfinish">未完成</a></li> </ul> </div> </div> </div> <!----------------------------- 以下是vue代码 -------------------------------> <script> let vm = new Vue({ el:'/#app', data:{ title:'', //记录添加任务输入的值 hash:'/#all', //记录url变化 进行任务状态切换 todos:[ //todos数组存放添加的便签任务 // isSelected:记录事情是否勾选 勾选表示已完成 // thing:记录事情的内容 // isDouble:记录任务是否在更改状态 false:不在更改状态 (双击可更改) {isSelected:false,thing:'洗衣服',isDouble:false}, {isSelected:false,thing:'看书',isDouble:false} ] }, created(){ //生命周期函数 url改变就会执行此函数 //拿到本地储存的数据 this.todos = JSON.parse(localStorage.getItem('todos'))||[] //监听hash值的变化 hashchange是规定的方法 window.addEventListener('hashchange',()=>{ //括号函数内部this指向外部this this.hash = window.location.hash; }) }, watch: { //属性监听 todos:{ //监听todos属性变化 执行 handler(){ localStorage.setItem('todos',JSON.stringify(this.todos)) //本地存储 }, deep:true, //深度监视todos } }, computed: { //计算属性缓存 num(){ //num是一个计算属性 时时监测计入任务的变化 filter:管道符 遍历筛选todos数组中isSelected值为false的值 并返回长度 return this.todos.filter(todos=> !todos.isSelected).length }, filterTodos(){ //监测hash的值从而输出不同的数组 实现任务状态切换 if(this.hash==='/#finish') return this.todos.filter(todos=> todos.isSelected) if(this.hash==='/#unfinish') return this.todos.filter(todos=> !todos.isSelected) return this.todos } }, methods: { //存方法 add(){ //添加任务方法 if(this.title){ //添加任务框是否输入了值 是就执行下面给todos数组push添加任务 this.todos.push({isSelected:false,thing:this.title,isDouble:false}) this.title = "" } }, remove(index){ //删除任务方法 this.todos.splice(index,1) }, update(index){ //设置任务修改的状态 isDouble:true为正在修改 this.todos[index].isDouble = !this.todos[index].isDouble }, blur(index){ this.todos[index].isDouble=false; } }, directives:{ // directives 内存放的是自定义的指令 focus(el){ el.focus() //让元素获取焦点 } } }) </script> </body> </html>

 


