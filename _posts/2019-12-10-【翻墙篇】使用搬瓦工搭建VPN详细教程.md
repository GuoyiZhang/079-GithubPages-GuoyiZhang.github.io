---
layout:     post
title:      【翻墙篇】使用搬瓦工搭建VPN详细教程
subtitle:   【翻墙篇】使用搬瓦工搭建VPN详细教程
date:       2019-12-10 17:19:52
author:     Sunny day
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
---

>【翻墙篇】使用搬瓦工搭建VPN详细教程

# 【翻墙篇】使用搬瓦工搭建VPN详细教程


# 1. 购买bandwagonhost服务器

[官网地址](https://bwh8.net/)

打开[https://bwh8.net/vps-hosting.php](https://bwh8.net/vps-hosting.php)

![](https://img-blog.csdnimg.cn/2018112016385599.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20181120163956594.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20181120164035858.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

选择支付宝结账。支付完毕后进入[我的服务](https://bwh8.net/clientarea.php?action=products)页面，即可看到刚购买的服务器

 

# 2. 配置重装服务器

![](https://img-blog.csdnimg.cn/20181120164300286.png)

### 1. 关闭服务器，重装系统，关机选择 **stop ，**不要使用kill

![](https://img-blog.csdnimg.cn/20181120164445554.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

2. 选择系统为centos-6-x86_64，点击reload 会生成一个新的端口与密码，保存好这个密码！

![](https://img-blog.csdnimg.cn/20181120164640579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

支持安装系统完毕！

# 3. 安装VPN软件-shadowsocks

使用SSH工具登录VPS。

输入命令
yum update

会执行一些系统组件安装.

然后，会停在下面的界面，输入y。

系统开始安装和更新很多种软件。等待。。。

又有一个提示，继续输入y。

完成之后
在linux操作系统中，我们会经常要用到wget下载文件。wget非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性。

在linux中使用wget时，若报-bash:wget: command not found，则表明没有安装wget，需要安装，安装命令如下
yum -y install wget

 

接下来的命令比较多，恕不截图。除了特别强调以外，每次让输入Y/N时，就输入y。

yum install gcc yum install openssl-devel wget http://python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2 tar -jxvf Python-2.7.3.tar.bz2 cd Python-2.7.3 ./configure make all make install mv /usr/bin/python /usr/bin/python2.6.6 ln -s /usr/local/bin/python2.7 /usr/bin/python

yum不支持[Python](http://lib.csdn.net/base/python) 2.7，所以，按下面的操作，指定yum的[python](http://lib.csdn.net/base/python)版本：

vi /usr/bin/yum

将文件头部的

/#!/usr/bin/python

改成

/#!/usr/bin/python2.6.6

继续执行shell命令：

cd yum install python-setuptools wget https://bootstrap.pypa.io/ez_setup.py -O - | python wget http://pypi.python.org/packages/source/d/distribute/distribute-0.6.10.tar.gz tar zxvf distribute-0.6.10.tar.gz cd distribute-0.6.10 python setup.py install cd easy_install pip pip install shadowsocks

**到这里，shadowsocks安装完成。**

其他系统的安装命令、依赖文件、运行环境都有所不同，如果不是安装本文章一步步的运行下来的，那么本文章仅可供您参考，不保证能够运行成功。

如果您是按照本文章一步步的运行至此，那么您一定可以成功安装。

无论您是什么系统，如果在安装过程中有问题，我都特别欢迎您来提问，我将知无不言。

 

# 4. 配置shadowsocks

### 创建配置文件

首先，新建一个文件：
vi /etc/shadowsocks.json

输入下面的内容：

{ "server":"144.34.218.20", "server_port":16889, "password":"19951109zhangguoyi", "timeout":300, "method":"aes-256-cfb", "fast_open":false, "workers": 1 }

或

/# 用于多用户vpn { "server":"xxx.xx.x.xx", "port_password":{ "6666":"xxxxxxx", "7777":"xxxxxxx", "8888":"xxxxxxx", "9999":"xxxxxxx" }, "timeout":60, "method":"rc4-md5", "fast_open":false, "workers":1 }
 
**配置文件含义介绍：**

server：服务器IP地址
server_port：用于监听用户连接的端口，只要不是已经被占用的端口就可以。用户连接shadowsocks时输入这个端口号。
password：用户连接shadowsocks时的密码，自定义。
timeout：超时时间，单位是秒。
method：加密方法，可选择 “aes-256-cfb”, “rc4-md5”等等。
fast_open：true 或 false。如果你的服务器 [Linux](http://lib.csdn.net/base/linux) 内核在3.7+，可以开启 fast_open 以降低延迟。
workers：workers数量，默认为 1。

 

## 5. 配置开机自动启动

打开rc.local文件
vi /etc/rc.local

输入下面的代码

ssserver -c /etc/shadowsocks.json -d start

# 6. shadowsocks服务相关命令

启动shadowsocks服务
ssserver -c /etc/shadowsocks.json -d start

关闭shadowsocks服务

ssserver -c /etc/shadowsocks.json -d stop

重启shadowsocks服务

ssserver -c /etc/shadowsocks.json -d restart

 

# 7. 附件

## shadowsocks客户端下载

### shadowsocks on github

[https://github.com/shadowsocks](https://github.com/shadowsocks)

### download

**Windows**
[https://github.com/shadowsocks/shadowsocks-windows/releases](https://github.com/shadowsocks/shadowsocks-windows/releases)
[https://github.com/shadowsocks/shadowsocks-qt5/releases](https://github.com/shadowsocks/shadowsocks-qt5/releases)
**Mac OS X**
[https://github.com/shadowsocks/ShadowsocksX-NG/releases](https://github.com/shadowsocks/ShadowsocksX-NG/releases)
**[linux](http://lib.csdn.net/base/linux)**
[https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation](https://github.com/shadowsocks/shadowsocks-qt5/wiki/Installation)
[https://github.com/shadowsocks/shadowsocks-qt5/releases](https://github.com/shadowsocks/shadowsocks-qt5/releases)
**[iOS](http://lib.csdn.net/base/ios)**
[https://itunes.apple.com/app/apple-store/id1070901416?pt=2305194&ct=shadowsocks.org&mt=8](https://itunes.apple.com/app/apple-store/id1070901416?pt=2305194&ct=shadowsocks.org&mt=8)
[https://github.com/shadowsocks/shadowsocks-iOS/releases](https://github.com/shadowsocks/shadowsocks-iOS/releases)
[Android](http://lib.csdn.net/base/android)
[https://play.google.com/store/apps/details?id=com.github.shadowsocks](https://play.google.com/store/apps/details?id=com.github.shadowsocks)
[https://github.com/shadowsocks/shadowsocks-android/releases](https://github.com/shadowsocks/shadowsocks-android/releases)

##  

## 8. 基本安装命令

Debian / Ubuntu:
apt-get install python-pip pip install shadowsocks

CentOS:

yum install python-setuptools && easy_install pip pip install shadowsocks

# 9. 配置电脑 shadowsocks

 ![](https://img-blog.csdnimg.cn/20181120170110887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

## ** 选择全局模式，并启动代理即可翻墙！**

![](https://img-blog.csdnimg.cn/20181120170228705.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4NTA1ODA5,size_16,color_FFFFFF,t_70)

