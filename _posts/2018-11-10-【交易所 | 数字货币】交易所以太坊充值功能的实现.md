---
layout:     post
title:      【交易所 | 数字货币】交易所以太坊充值功能的实现
subtitle:   【交易所 | 数字货币】交易所以太坊充值功能的实现
date:       2018-11-10 09:16:47
author:     Sunny day
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 区块链零基础到实战教程
    - 数字货币
    - 以太坊
---

>【交易所 | 数字货币】交易所以太坊充值功能的实现

# 【交易所 | 数字货币】交易所以太坊充值功能的实现


主要开发语言是ruby，流程大概是，钱包生成使用以太坊go-ethereum，生成的keystroe使用py-ethereum解析成private_key，签名transaction用node，再用ruby封装的json rpc client发送到以太坊主网。

虽然听起来就绕来绕去的，但是目前转private_key的方法应该只有python的客户端支持，签名transaction的方法也只有node的web3有支持，发送到以太坊主网可以很多办法，就是post一下，用ruby也就是因为熟悉。

具体步骤：

1. 从用户注册开始，需要生成一个以太坊钱包，需要安装go-ethereum，安装方法自行google。生成钱包的命令：

str = `geth --datadir /#{ENV['DATADIR']} account new --password /#{file.path}`

DATADIR是go-ethereum的数据目录，生成的钱包keystore会存到这个目录下，file.path是事先准备好的密码写进文件。

2. 通过etherscan的api监听全部transaction，接口是

url = "http://api.etherscan.io/api?module=account&action=txlist&address=/#{address}&startblock=0&endblock=99999999&sort=desc&apikey=/#{API_KEY}"

然后通过判断返回每个transaction的to字段是否等于address，来判断这条记录是否为转入记录，co

